## 结构划分：
* models *
    主要是针对 数据库 的操作 以及 豆瓣读书爬虫（spider.js）和清华大学出版社的爬虫(spider_tsinghua.js)
* routes *
    根据url响应内容，可理解为 后台 操作
* views *
    前端页面
* public *
    css,js文件

## 功能划分
- 新书入库
- 借还书
- 逾期发送邮件
- 读者管理(TODO)
  
### 新书入库

扫码(或手输)isbn -> 前端ajax发送 -> 后端接收后进入数据库查询,若不存在, 使用爬虫获取图书信息 -> 返回给前端 
（返回数据中 from 字段表示数据来源为数据库还是网络 ==> 即表示数据库中是否已有该书信息， 1：表示来自数据库，0：表示来自互联网）
-> 前端填充 -> 输入图书编号(eg:101), 或利用数据库自增 --> 确认 --> 返回入库结果

__注：__ 图书爬虫数据源为豆瓣读书，但有部分书并不在其中，故而在豆瓣图书搜不到的情况下新增了清华大学出版社的爬虫：
若依然获取不到，请选择手动输入， 并下载该书的图片保存到在 public/images 文件夹下，格式为 ** isbn号.jpg **  很重要！！！

### 借还书
* __借(还)书：__ 扫码(或手输)isbn -> 前端通过ajax获取图书信息 -> 输入借书人学号 -> 确认 --> 返回结果

### 邮件通知
1.在app.js 中有一个定时任务，设置为 每天 10 点执行。内容为 sendEmail.js 中的checkout 函数 ==> 给逾期及即将到期的人发送邮件 ==> 人员入库时尽可能添加其邮箱
2.sendEmail.js 邮件发送器：使用 nodemailer 插件，发送本身并不复杂，重点在于配置邮件发送方信息。
    最初使用163邮箱，后发现对发送数量及发送间隔有严格限制，经常被封。。。，具体的163邮箱信息都被我放置在根目录下的 config.js 中，可自行查看。
    
    使用163或其他邮箱的重点在于每次发送都设定足够长的时间间隔，以及在不长的时间间隔内不要对同一个账号多次发送邮件。
    ps: 也许qq邮箱没有那么多限制，可自行尝试。

    现使用我的域名绑定的腾讯企业邮箱，考虑到有空间限制，因此希望 学弟/学妹 到时能换一个邮箱。并不复杂，购买一个域名，然后绑定企业邮箱即可，腾讯阿里有整套服务, 可自行百度。

3.checkTimeout.js 从数据库中获取需要发送邮件的人信息。

### TODO  
* __预约：__ emmm,懒,没写...
* __读者管理:__ TODO